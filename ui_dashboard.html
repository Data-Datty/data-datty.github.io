<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Labor Market Dashboard - Weekly Claims Trends</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1e40af 0%, #1e3a8a 100%);
            min-height: 100vh;
            color: #333;
        }

        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            min-height: 100vh;
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.3);
        }

        .header {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            padding: 25px 40px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 20"><defs><radialGradient id="a"><stop offset="0" stop-color="%23ffffff" stop-opacity="0.08"/><stop offset="1" stop-color="%23ffffff" stop-opacity="0"/></radialGradient></defs><circle cx="10" cy="10" r="8" fill="url(%23a)"/><circle cx="30" cy="15" r="6" fill="url(%23a)"/><circle cx="50" cy="5" r="4" fill="url(%23a)"/><circle cx="70" cy="12" r="7" fill="url(%23a)"/><circle cx="90" cy="8" r="5" fill="url(%23a)"/></svg>') repeat;
        }

        .header-content {
            position: relative;
            z-index: 1;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .header .subtitle {
            font-size: 1rem;
            opacity: 0.9;
        }

        .header-stats {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
        }

        .header-stat {
            text-align: center;
        }

        .header-stat .value {
            font-size: 1.8rem;
            font-weight: 700;
            display: block;
        }

        .header-stat .label {
            font-size: 0.85rem;
            opacity: 0.8;
        }

        .last-updated {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-top: 10px;
        }

        .tab-container {
            background: #f8fafc;
            border-bottom: 1px solid #e2e8f0;
            padding: 0 40px;
            overflow-x: auto;
        }

        .tab-nav {
            display: flex;
            gap: 0;
            min-width: max-content;
        }

        .tab-button {
            background: none;
            border: none;
            padding: 18px 25px;
            font-size: 0.95rem;
            font-weight: 500;
            color: #64748b;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .tab-button:hover {
            color: #3b82f6;
            background: rgba(59, 130, 246, 0.05);
        }

        .tab-button.active {
            color: #3b82f6;
            border-bottom-color: #3b82f6;
            background: white;
        }

        .tab-content {
            padding: 40px;
            min-height: calc(100vh - 200px);
        }

        .tab-panel {
            display: none;
        }

        .tab-panel.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title::before {
            content: '';
            width: 4px;
            height: 30px;
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            border-radius: 2px;
        }

        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .grid-3 { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; }
        .grid-4 { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }

        .metric-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .metric-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
        }

        .metric-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #3b82f6 0%, #1d4ed8 100%);
        }

        .metric-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 15px;
        }

        .metric-value {
            font-size: 2.2rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 8px;
        }

        .metric-change {
            font-size: 0.9rem;
            padding: 4px 10px;
            border-radius: 15px;
            display: inline-block;
        }

        .metric-change.positive {
            background: #ecfdf5;
            color: #065f46;
        }

        .metric-change.negative {
            background: #fef2f2;
            color: #991b1b;
        }

        .metric-change.neutral {
            background: #f3f4f6;
            color: #374151;
        }

        .chart-container {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(0, 0, 0, 0.05);
            margin-bottom: 25px;
        }

        .chart-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 20px;
            text-align: center;
        }

        .economic-summary {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .economic-summary h3 {
            font-size: 1.4rem;
            margin-bottom: 15px;
        }

        .economic-summary p {
            font-size: 1rem;
            line-height: 1.6;
            opacity: 0.95;
        }

        .highlight-stat {
            background: rgba(255, 255, 255, 0.15);
            padding: 4px 8px;
            border-radius: 6px;
            font-weight: 600;
        }

        .alert-box {
            background: #fef3cd;
            border: 1px solid #f6cc6d;
            color: #92400e;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            border-left: 5px solid #f59e0b;
        }

        .alert-box h4 {
            font-weight: 600;
            margin-bottom: 8px;
        }

        .alert-box.positive {
            background: #ecfdf5;
            border-color: #a7f3d0;
            color: #065f46;
            border-left-color: #10b981;
        }

        .alert-box.negative {
            background: #fef2f2;
            border-color: #fecaca;
            color: #991b1b;
            border-left-color: #ef4444;
        }

        @media (max-width: 768px) {
            .tab-content { padding: 20px; }
            .grid-2 { grid-template-columns: 1fr; }
            .header-content { flex-direction: column; text-align: center; }
            .header-stats { justify-content: center; }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <div>
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 8px;">
                        <h1 style="margin: 0;">Labor Market Dashboard</h1>
                        <span style="background: rgba(255,255,255,0.2); padding: 4px 12px; border-radius: 12px; font-size: 0.8rem; font-weight: 500;">WEEKLY TRENDS</span>
                    </div>
                    <p class="subtitle">Simple year-over-year comparison of unemployment insurance claims</p>
                    <p style="font-size: 0.9rem; opacity: 0.9; margin-top: 8px; max-width: 600px; line-height: 1.4;">
                        Track how 2025 unemployment claims compare to previous years - clear trends, easy insights.
                    </p>
                    <div class="last-updated">Data Period: Week Ending Aug 16, 2025 | All States</div>
                </div>
                <div class="header-stats">
                    <div class="header-stat">
                        <span class="value">193K</span>
                        <span class="label">This Week (Initial Claims)</span>
                    </div>
                    <div class="header-stat">
                        <span class="value">192K</span>
                        <span class="label">Same Week 2024</span>
                    </div>
                    <div class="header-stat">
                        <span class="value">≈ Same</span>
                        <span class="label">vs 2024</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <div class="tab-container">
            <div class="tab-nav">
                <button class="tab-button active" onclick="showTab('overview')">Current vs Previous Years</button>
                <button class="tab-button" onclick="showTab('states')">Top States</button>
                <button class="tab-button" onclick="showTab('insights')">Key Insights</button>
            </div>
        </div>

        <!-- Tab Content -->
        <div class="tab-content">
            <!-- Overview Tab -->
            <div id="overview" class="tab-panel active">
                <div class="economic-summary">
                    <h3>📊 What's Happening Right Now</h3>
                    <p>This week, <span class="highlight-stat">193,000 people</span> filed new unemployment claims. This is essentially <span class="highlight-stat">unchanged from previous years</span> - virtually identical to the same week in 2024 (192K) and close to 2022 (187K). After some volatility including a spike to 260K three weeks ago, the level has stabilized around the low-to-mid 190s, following typical summer seasonal patterns.</p>
                </div>

                <h2 class="section-title">How Does 2025 Compare?</h2>

                <div class="chart-container">
                    <h3 class="chart-title">Initial Claims by Week: 2022 vs 2023 vs 2024 vs 2025</h3>
                    <canvas id="yearComparisonChart" width="800" height="400"></canvas>
                    <p style="font-size: 0.9rem; color: #6b7280; text-align: center; margin-top: 15px;">
                        Each line shows how many people filed for unemployment each week. Lower is better. We're currently at week 32.
                    </p>
                </div>

                <div class="grid-4">
                    <div class="metric-card">
                        <div class="metric-title">This Week (Aug 16)</div>
                        <div class="metric-value">193K</div>
                        <div class="metric-change neutral">New unemployment filings</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-title">Same Week 2024</div>
                        <div class="metric-value">192K</div>
                        <div class="metric-change neutral">1K less than this year</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-title">Same Week 2023</div>
                        <div class="metric-value">199K</div>
                        <div class="metric-change negative">6K more than this year</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-title">Same Week 2022</div>
                        <div class="metric-value">187K</div>
                        <div class="metric-change positive">6K less than this year</div>
                    </div>
                </div>

                <div class="chart-container">
                    <h3 class="chart-title">People Still on Unemployment (Weeks Claimed): 2022 vs 2023 vs 2024 vs 2025</h3>
                    <canvas id="weeksClaimed" width="800" height="400"></canvas>
                    <p style="font-size: 0.9rem; color: #6b7280; text-align: center; margin-top: 15px;">
                        This shows how many people are receiving unemployment benefits each week. 2025 shows mixed patterns compared to recent years.
                    </p>
                </div>

                <div class="alert-box">
                    <h4>💡 Key Takeaway</h4>
                    <p><strong>Stability:</strong> New unemployment claims are running at very similar levels to recent years, suggesting stable labor market conditions. <strong>Watch this:</strong> After some summer volatility (peaking at 260K), claims have settled back to typical levels around 193K.</p>
                </div>
            </div>

            <!-- States Tab -->
            <div id="states" class="tab-panel">
                <h2 class="section-title">Which States Have the Most Claims?</h2>
                
                <div class="economic-summary">
                    <h3>🗺️ State Analysis - Per-Capita Perspective</h3>
                    <p>When we look at unemployment claims relative to each state's population, a different picture emerges. While <span class="highlight-stat">California still leads in raw numbers (38,036 claims)</span>, on a per-capita basis, other states show higher unemployment stress. This analysis shows <span class="highlight-stat">claims per 1,000 people</span>, giving us a better view of which states face the most unemployment pressure relative to their size.</p>
                </div>

                <div class="chart-container">
                    <h3 class="chart-title">States by Unemployment Rate - Claims per 1,000 People (Aug 16, 2025)</h3>
                    <canvas id="statesChart" width="800" height="400"></canvas>
                </div>

                <div class="grid-3" id="stateMetrics">
                    <div class="metric-card">
                        <div class="metric-title">California</div>
                        <div class="metric-value">38,036</div>
                        <div class="metric-change neutral">0.98 per 1,000 people</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-title">New Jersey</div>
                        <div class="metric-value">9,045</div>
                        <div class="metric-change neutral">0.97 per 1,000 people</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-title">Illinois</div>
                        <div class="metric-value">9,402</div>
                        <div class="metric-change neutral">0.75 per 1,000 people</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-title">Pennsylvania</div>
                        <div class="metric-value">9,674</div>
                        <div class="metric-change neutral">0.74 per 1,000 people</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-title">New York</div>
                        <div class="metric-value">13,322</div>
                        <div class="metric-change neutral">0.68 per 1,000 people</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-title">Washington</div>
                        <div class="metric-value">4,829</div>
                        <div class="metric-change neutral">0.62 per 1,000 people</div>
                    </div>
                </div>

                <div class="alert-box">
                    <h4>📊 Per-Capita Analysis Reveals Different Story</h4>
                    <p><strong>Why per-capita matters:</strong> Raw numbers favor large states, but per-capita rates show which states have the highest unemployment stress relative to their population. California (0.98 per 1,000) and New Jersey (0.97 per 1,000) show the highest relative rates, while states like Texas (0.50 per 1,000) and Florida (0.27 per 1,000) show much lower unemployment pressure despite their large populations.</p>
                </div>
            </div>

            <!-- Insights Tab -->
            <div id="insights" class="tab-panel">
                <h2 class="section-title">What Should We Pay Attention To?</h2>

                <div class="grid-2">
                    <div class="alert-box positive">
                        <h4>✅ Good News</h4>
                        <p><strong>Stable conditions:</strong> 193K claims this week is virtually identical to 2024 (192K) and close to historical norms, suggesting steady labor market performance.</p>
                        <p><strong>Recovery from volatility:</strong> After spiking to 260K in mid-July, claims have stabilized back to normal levels around 193K.</p>
                    </div>
                    <div class="alert-box negative">
                        <h4>⚠️ Things to Watch</h4>
                        <p><strong>Summer volatility patterns:</strong> We saw significant fluctuation with claims jumping from 193K to 260K and back to 193K over the past few weeks.</p>
                        <p><strong>Continuing claims trends:</strong> At 1.95 million people receiving benefits, levels remain comparable to recent years but worth monitoring for changes.</p>
                    </div>
                </div>

                <div class="economic-summary">
                    <h3>🎯 Bottom Line</h3>
                    <p>The job market shows <strong>stable conditions</strong> in August 2025. New unemployment claims at 193K are running at levels nearly identical to recent years, indicating steady labor market fundamentals. The temporary spike to 260K in mid-July has resolved, with claims returning to typical summer levels. The data suggests neither significant improvement nor deterioration, but rather a labor market operating within normal parameters.</p>
                </div>

                <div class="grid-3">
                    <div class="metric-card">
                        <div class="metric-title">Claims Level Trend</div>
                        <div class="metric-value">Stable</div>
                        <div class="metric-change neutral">Similar to recent years</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-title">Recent Direction</div>
                        <div class="metric-value">Stabilizing</div>
                        <div class="metric-change positive">Down from 260K spike</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-title">Overall Assessment</div>
                        <div class="metric-value">Steady</div>
                        <div class="metric-change neutral">Normal seasonal patterns</div>
                    </div>
                </div>

                <div class="chart-container">
                    <h3 class="chart-title">Recent 8-Week Trend: Are Things Getting Better or Worse?</h3>
                    <canvas id="recentTrendChart" width="800" height="300"></canvas>
                    <p style="font-size: 0.9rem; color: #6b7280; text-align: center; margin-top: 15px;">
                        The blue line shows actual claims, the dashed line shows the smoothed trend. Recent stabilization after mid-summer volatility.
                    </p>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div style="background: #1e40af; color: white; padding: 20px 40px; text-align: center;">
            <div style="max-width: 1200px; margin: 0 auto;">
                <p style="font-size: 0.9rem; opacity: 0.9;">
                    Weekly analysis of U.S. Department of Labor unemployment insurance data • Simple insights, clear trends
                </p>
            </div>
        </div>
    </div>

    <script>
        // UPDATED DATA from ar539.csv analysis - August 2025
        const claimsData = {
            // Weekly data for each year (32 weeks shown) - UPDATED WITH REAL DATA
            weeks: Array.from({length: 32}, (_, i) => i + 1),
            
            // Updated historical patterns extracted from ar539.csv (in thousands) - extended to week 32
            claims2022: [314,414,336,267,258,231,240,216,196,220,204,182,197,194,223,197,203,196,186,199,187,183,186,206,206,207,218,243,237,201,195,187],
            claims2023: [342,291,227,227,236,227,211,193,229,210,203,213,195,223,216,202,191,203,199,201,207,219,250,249,229,251,257,257,213,205,204,199],
            claims2024: [318,290,249,263,234,223,199,195,214,202,191,193,197,215,208,202,189,210,197,192,197,196,235,227,225,239,241,279,225,216,201,192],
            claims2025: [305,352,284,228,240,232,223,220,225,213,207,199,199,216,220,210,223,206,203,200,210,207,243,234,227,230,241,260,215,193,195,193],
            
            // Weeks claimed data (in millions) - UPDATED DATA
            weeksClaimed2022: [1.864,2.057,2.068,2.004,2.039,2.001,1.976,1.914,1.855,1.913,1.806,1.724,1.673,1.651,1.566,1.464,1.438,1.4,1.329,1.28,1.287,1.254,1.254,1.268,1.286,1.299,1.369,1.324,1.447,1.441,1.445,1.448],
            weeksClaimed2023: [1.866,1.903,1.859,1.904,1.919,1.941,1.922,1.885,1.963,1.903,1.872,1.871,1.835,1.786,1.78,1.744,1.682,1.653,1.605,1.606,1.603,1.588,1.642,1.665,1.668,1.731,1.719,1.881,1.831,1.823,1.821,1.818],
            weeksClaimed2024: [2.098,2.117,2.047,2.174,2.123,2.133,2.086,2.085,2.106,2.072,2.002,2.008,1.932,1.923,1.844,1.808,1.749,1.739,1.681,1.682,1.662,1.666,1.703,1.723,1.744,1.816,1.791,1.94,1.908,1.928,1.925,1.922],
            weeksClaimed2025: [2.179,2.265,2.239,2.164,2.243,2.179,2.183,2.152,2.22,2.143,2.11,2.066,2.052,1.98,1.937,1.874,1.892,1.831,1.777,1.774,1.769,1.749,1.82,1.808,1.856,1.895,1.89,2.006,2,1.999,1.945,1.950],
            
            // Recent 8 weeks for trend (UPDATED WITH REAL DATA from ar539.csv)
            recentWeeks: ['Jun 28', 'Jul 5', 'Jul 12', 'Jul 19', 'Jul 26', 'Aug 2', 'Aug 9', 'Aug 16'],
            recentClaims: [230, 241, 260, 215, 193, 195, 199, 193],
            recentAverage: [238, 241, 243, 240, 236, 230, 224, 218],
            
            // Top states with UPDATED DATA and per-capita calculations from Aug 16, 2025
            statePopulations: {
                'CA': 39.0,   // 39.0 million
                'TX': 31.0,   // 31.0 million  
                'NY': 19.5,   // 19.5 million
                'PA': 13.0,   // 13.0 million
                'IL': 12.5,   // 12.5 million
                'NJ': 9.3,    // 9.3 million
                'FL': 23.0,   // 23.0 million
                'MI': 10.0,   // 10.0 million
                'OH': 11.7,   // 11.7 million
                'WA': 7.8     // 7.8 million
            },
            
            // UPDATED state data from Aug 16, 2025
            topStates: ['CA', 'TX', 'NY', 'PA', 'IL', 'NJ', 'FL', 'MI', 'OH', 'WA'],
            stateClaims: [38036, 15639, 13322, 9674, 9402, 9045, 6139, 5369, 5164, 4829],
            
            // Calculate per-capita rates (claims per 1000 people)
            getStatePerCapitaRates: function() {
                return this.topStates.map((state, index) => {
                    const claims = this.stateClaims[index];
                    const population = this.statePopulations[state] * 1000000; // Convert to actual population
                    const perCapitaRate = (claims / population) * 1000; // Per 1000 people
                    return {
                        state: state,
                        claims: claims,
                        population: this.statePopulations[state],
                        rate: Math.round(perCapitaRate * 100) / 100 // Round to 2 decimal places
                    };
                });
            }
        };

        // Chart options
        const chartOptions = {
            responsive: true,
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: { padding: 20, usePointStyle: true }
                }
            },
            scales: {
                y: { 
                    grid: { color: 'rgba(0, 0, 0, 0.05)' },
                    beginAtZero: false
                },
                x: { grid: { color: 'rgba(0, 0, 0, 0.05)' } }
            }
        };

        // Tab functionality
        function showTab(tabName) {
            document.querySelectorAll('.tab-panel').forEach(panel => {
                panel.classList.remove('active');
            });
            
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Create main year comparison chart
        function createYearComparisonChart() {
            const ctx = document.getElementById('yearComparisonChart').getContext('2d');
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: claimsData.weeks,
                    datasets: [
                        {
                            label: '2022',
                            data: claimsData.claims2022,
                            borderColor: '#8b5cf6',
                            backgroundColor: 'rgba(139, 92, 246, 0.1)',
                            borderWidth: 2,
                            fill: false,
                            tension: 0.4
                        },
                        {
                            label: '2023',
                            data: claimsData.claims2023,
                            borderColor: '#06b6d4',
                            backgroundColor: 'rgba(6, 182, 212, 0.1)',
                            borderWidth: 2,
                            fill: false,
                            tension: 0.4
                        },
                        {
                            label: '2024',
                            data: claimsData.claims2024,
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            borderWidth: 2,
                            fill: false,
                            tension: 0.4
                        },
                        {
                            label: '2025',
                            data: claimsData.claims2025,
                            borderColor: '#ef4444',
                            backgroundColor: 'rgba(239, 68, 68, 0.1)',
                            borderWidth: 4,
                            fill: false,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    ...chartOptions,
                    scales: {
                        x: { 
                            title: { display: true, text: 'Week of Year' },
                            grid: { color: 'rgba(0, 0, 0, 0.05)' }
                        },
                        y: { 
                            title: { display: true, text: 'Initial Claims (thousands)' },
                            grid: { color: 'rgba(0, 0, 0, 0.05)' }
                        }
                    }
                }
            });
        }

        // Create weeks claimed chart
        function createWeeksClaimedChart() {
            const ctx = document.getElementById('weeksClaimed').getContext('2d');
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: claimsData.weeks,
                    datasets: [
                        {
                            label: '2022',
                            data: claimsData.weeksClaimed2022,
                            borderColor: '#8b5cf6',
                            backgroundColor: 'rgba(139, 92, 246, 0.1)',
                            borderWidth: 2,
                            fill: false,
                            tension: 0.4
                        },
                        {
                            label: '2023',
                            data: claimsData.weeksClaimed2023,
                            borderColor: '#06b6d4',
                            backgroundColor: 'rgba(6, 182, 212, 0.1)',
                            borderWidth: 2,
                            fill: false,
                            tension: 0.4
                        },
                        {
                            label: '2024',
                            data: claimsData.weeksClaimed2024,
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            borderWidth: 2,
                            fill: false,
                            tension: 0.4
                        },
                        {
                            label: '2025',
                            data: claimsData.weeksClaimed2025,
                            borderColor: '#ef4444',
                            backgroundColor: 'rgba(239, 68, 68, 0.1)',
                            borderWidth: 4,
                            fill: false,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    ...chartOptions,
                    scales: {
                        x: { 
                            title: { display: true, text: 'Week of Year' },
                            grid: { color: 'rgba(0, 0, 0, 0.05)' }
                        },
                        y: { 
                            title: { display: true, text: 'Weeks Claimed (millions)' },
                            grid: { color: 'rgba(0, 0, 0, 0.05)' }
                        }
                    }
                }
            });
        }

        // Create states chart
        function createStatesChart() {
            const ctx = document.getElementById('statesChart').getContext('2d');
            
            // Get per-capita rates and sort by rate (highest to lowest)
            const perCapitaData = claimsData.getStatePerCapitaRates()
                .sort((a, b) => b.rate - a.rate);
            
            const stateLabels = perCapitaData.map(item => item.state);
            const perCapitaRates = perCapitaData.map(item => item.rate);
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: stateLabels,
                    datasets: [{
                        label: 'Claims per 1,000 People',
                        data: perCapitaRates,
                        backgroundColor: '#3b82f6',
                        borderColor: '#1d4ed8',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: { 
                            beginAtZero: true,
                            title: { display: true, text: 'Claims per 1,000 People' }
                        },
                        x: { title: { display: true, text: 'State' } }
                    }
                }
            });
        }

        // Create recent trend chart
        function createRecentTrendChart() {
            const ctx = document.getElementById('recentTrendChart').getContext('2d');
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: claimsData.recentWeeks,
                    datasets: [
                        {
                            label: 'Weekly Claims',
                            data: claimsData.recentClaims,
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4
                        },
                        {
                            label: 'Trend (4-week average)',
                            data: claimsData.recentAverage,
                            borderColor: '#1d4ed8',
                            backgroundColor: 'rgba(29, 78, 216, 0.1)',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            fill: false,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    ...chartOptions,
                    scales: {
                        y: { 
                            title: { display: true, text: 'Initial Claims (thousands)' },
                            grid: { color: 'rgba(0, 0, 0, 0.05)' }
                        }
                    }
                }
            });
        }

        // Initialize all charts when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Labor Market Dashboard loaded with August 2025 data');
            
            setTimeout(() => {
                createYearComparisonChart();
                createWeeksClaimedChart();
                createStatesChart();
                createRecentTrendChart();
            }, 100);
        });
    </script>
</body>
</html>